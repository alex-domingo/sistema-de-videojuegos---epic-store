<div class="page">
    <header class="header">
        <h2>Mi Biblioteca</h2>
        <a routerLink="/" class="back">← Volver al catálogo</a>
    </header>

    <p class="hint" *ngIf="resp()">
        {{ resp()!.mensaje }} (Total: {{ resp()!.total }})
    </p>

    <p *ngIf="cargando()">Cargando...</p>
    <p class="error" *ngIf="error()">{{ error() }}</p>

    <section class="grid" *ngIf="items().length">
        <a class="card" *ngFor="let v of items()" [routerLink]="['/videojuego', v.idVideojuego]">
            <div class="top">
                <div class="title">{{ v.titulo }}</div>
                <div class="price">Q{{ v.precio }}</div>
            </div>

            <div class="meta">
                <div><b>Empresa:</b> {{ v.empresa }}</div>
                <div>
                    <b>Propiedad:</b>
                    <span class="badge">{{ v.tipoPropiedad }}</span>
                </div>
                <div>
                    <b>Instalación:</b>
                    <span class="badge" [class.ok]="v.estadoInstalacion === 'INSTALADO'">
                        {{ v.estadoInstalacion }}
                    </span>
                </div>
                <div class="muted">
                    Último cambio: {{ v.fechaUltimoCambioEstado }}
                </div>
            </div>

            <div class="img-hint">Portada: {{ v.imagenPortada }}</div>
        </a>
    </section>

    <p *ngIf="resp() && items().length === 0" class="muted">
        Tu biblioteca está vacía.
    </p>
</div>